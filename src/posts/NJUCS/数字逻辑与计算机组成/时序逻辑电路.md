---
title: 时序逻辑电路
date: 2025-03-14
author: Yama
---



## 第一讲 | 时序逻辑电路概述

输出结果的输出不仅由外部输入决定，还由当前的状态决定（or 由过去时刻的行为）

当输入新的信号之后，电路的状态可以改变，**也可以保持在当前状态**

### 有限状态机 | Finite state machine (FSM)

有限状态机时用来刻画状态转换的工具

通常，用**状态图**来表示有限状态机

-   状态用圆圈表示
-   状态转换用箭头(`有向边`)，并**标注状态转变的输入信号和输出信号**;

>   在图中，状态转换的箭头上面用 输入信号/输出信号 表示输入和输出

**例：检测输入序列是否为连续4个“1”**

​	A-初始态：若输入1，则转B 

​	B-连续1个“1”：若输入1，则转C

​	C-连续2个“1”：若输入1，则转D

​	D-连续3个“1”：若输入1，则状态不变 ，并输出为1（表示检测到连续4个1）

​	任何状态下，输入0都会转到初态A

<img src="https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314105927158.png" style="width:50%"/>

---

**如何用数字逻辑实现一个FSM？**

用二进制编码的方式，表示输入输出，状态（关键是状态）

-   **输出函数**：

-   **激励函数**：

-   **记忆模块**：



### **时序逻辑电路的结构**

状态记忆模块：由多个状态记忆单元构成（存储元件）

次态激励逻辑模块F ：激励函数（现态和外部输入的逻辑函数）

>   激励函数和输出函数都是**组合逻辑电路**，状态记忆模块是**时序逻辑电路** 

输出逻辑模块G ：输出函数（现态和外部输入的逻辑函数）

-   Mealy型：输出依赖于当前状态和当前输入信号 

-   Moore型：输出仅依赖于当前状态，和当前输入信号无关

![image-20250314112122667](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314112122667.png)

<center>Mealy</center>

![image-20250314112743952](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314112743952.png)

<center>Moore</center>

**其中的激励函数和输出函数模块都是`组合逻辑电路`！！！**

记忆模块把旧的状态给激活函数和输出模块，然后激励模块才把新的状态给记忆模块；

>   拿旧状态去算新状态和输出！

---

**同步时序逻辑电路 和 异步时序逻辑电路**

-   同步时序逻辑电路：在统一的时钟信号控制下进行状态转换

​	通过Clk来控制记忆模块

异步时序逻辑电路：没有统一的时钟信号来控制状态的改变

**时钟脉冲**

时钟脉冲之间的时间间隔称为`时钟周期`。单位是秒。通常将1秒内所产生的脉冲个数称为`时钟频率`。单位是Hz计算机中的系统时钟就是一个典型的、频率精确和稳定的脉冲信号发生器。

### 时序逻辑电路的定时

![image-20250314113535631](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314113535631.png)

## 第二讲 | 锁存器和触发器

### 双稳态元件

一种可以表示两种状态的元件。

-   状态1：置位态（Set）
-   状态0：复位态（Reset)

**双稳态元件的简单实现：**

串联两个反相器，则反相器的输出状态不同，且保持稳定Q为高电平时，为置位状态；Q为低电平时，为复位状态

<img src="https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314114119774.png" style="width:50%" />

**用两个反相器串联构建的   双稳态元件无法改变电路状态** 

用1个或多个输入信号能驱动   双稳态元件进入稳定状态，这   些输入信号称为激励信号   或激励输入。 

---

### 锁存器 | latch

通过**激励信号的电平信号**来控制存储元件的状态

置位复位锁存器(Set-Reset latch)：

-   具有置位和复位激励信号置位激励信号Set有效时，强制存储元件的输出Q为1
-   复位激励信号Reset有效时，强制存储元件的输出Q为0

![image-20250314114631262](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314114631262.png)

### 触发器 | flip-flop

具有时钟控制信号(clock) 通过**时钟信号的边沿**和set/reset的电平共同来触发存储元件改变状态

![image-20250314114853081](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250314114853081.png)

### SR 锁存器

SR锁存器：使用一对交叉耦合的或非门构成双稳态电路，也称为置位-重置（复位）锁存器。

**S是置位输入端，R是重置输入端**

从输入驱动信号有效开始，到输出达到稳定为止有一定的延迟，这个延迟称为**触发延迟**或**锁存延迟**

![image-20250317095218420](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317095218420.png)

-   S和R至多一个为高电平
-   如果S为高电平的话，Q输出高电平；如果R为高电平的话，Q输出低电平。

**状态转移表**，**状态转移方程**

<span><img src="https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317102612290.png" style="width: 30%;"/></span> 使用**状态转移表**来表示状态的转移。

状态转移方程：
$$
Q*= S+ \overline R \cdot Q
$$

$$
S \cdot Q \neq 1
$$

### D锁存器

D锁存器有一个驱动信号和一个使能端

当使能端为高电平的时候，驱动信号才能有效，驱动信号为高电平的时候，输出高电平；

![image-20250317095604714](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317095604714.png)

>   D为数据输入端，C为控制端；**只有一个激励输入端** 

C=0的时候，电路状态不变；C=1时，将D的数据**锁存**。

**状态图，状态转移表，状态方程,时序图**：

|  D   |  Q*  |
| :--: | :--: |
|  0   |  0   |
|  1   |  1   |

<img src="https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317104318075.png" style="width:50%;"/>



### D触发器

主从结构的D触发器

![image-20250317105212890](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317105212890.png)



| **CLK**    | **主锁存器**                  | **从锁存器**                  |
| ---------- | ----------------------------- | ----------------------------- |
| L      | 写入  QM变为D | 不变Q=last            |
| 上升沿| 锁存QM=D        | 写入Q变为QM |
| H      | 不变 QM=D          | 不变Q=QM       |

![image-20250317105551072](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317105551072.png)

（上升沿到来之前，把D已经存入QM，之后在上升沿结束以后把QM存入Q）

**锁存延迟 | Clock -> Q延迟**

在clk边沿到来后，到Q输出改变为D的时间。

![image-20250317111333422](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317111333422.png)

**建立时间 | setup**

输入信号D在时钟边沿到来前，QM端稳定的时间（主锁存器稳定下来的时间）

**保持时间 | hold time**

输入信号D在时钟边沿到来后，D需要稳定的时间，**要让`从锁存器`成功写入的时间**。

>   **避免主锁存器在上升沿过程中写入新的D值**

---

**这个D触发器是*上升沿*触发**，还有*下降沿*触发的触发器



![image-20250317095932508](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317095932508.png)

当Clk信号为高电平时，左边的D锁存器打开，Q和D的信号一致；

当Clk信号由高电平转成低电平的时候，右边的寄存器打开，使得第二个寄存器能够输出原先D的信号。

#### 带使能端的D触发器

能够通过使能端控制是否要写入激励输入端D的值

![image-20250317112102309](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317112102309.png)

>   注意到： 前面其实接入了一个二路选择器，输入分别是D和Q，使能端为EN；



---



#### 带复位功能的D触发器

同步触发：在时钟信号才能更改触发器的状态

![image-20250317112326003](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317112326003.png)



---

### T触发器

在每一次时钟周期都会改变存储的状态

![image-20250317112847603](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317112847603.png)

可以加入使能端En，当使能端为高电平时才能改变触发器；

---

**存储？** 电路在一直工作的时候，只要在一定的激励输入下，输出稳定不不变，Q值保持稳定，因此为**存储**

组合逻辑电路只能按照输入计算出输出，不是存储。

最简单的时序逻辑电路： 存储元件（锁存器和触发器）

经典的时序逻辑电路：寄存器

## **第三讲**  **同步时序逻辑设计**

设计一个检测是否由连续的“101”的电路

### 分析需求，画状态图

![image-20250317114922785](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317114922785.png)

状态图/状态表的要求：

-   互斥性：从每个状态出发的所有状态转换路径上的转换条件都 是互斥的，如本例中，转移条件分别是X=0和X=1，互斥。 

-   完备性：从每个状态出发的所有状态转换路径上的转移表达式 的逻辑或等于1（逻辑真）。如X=0和X=1，0+1=1。

**即，线不少（所有的有向边都要画出），线不重（同一个输入只能有一个输出）**

### 化简状态图

 **等价状态**：两个状态等价指在所有输入组合下，它们的**输出相同**且(**次态相同 *或*次态等价**)

我们合并等价状态可以获得简单的状态表

![image-20250317115627046](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250317115627046.png)
