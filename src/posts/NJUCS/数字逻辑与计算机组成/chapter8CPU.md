---
date: 2025-04-21
title: chapter8 | CPU的设计
---

## CPU概述

**CPU执行指令的过程**：

1.   根据pc取指令

异常时内部异常，中断时由于外部事件的出现导致CPU停止执行指令； 即`内部异常，外部中断`

---

### **计算机的五大组成部件**

-   Memory
-   I/O
-   Datapath 数据通路 **执行部件**
-   Control Unit 控制部件 **控制器**：控制器对执行部件发出信号。

---

#### **数据通路Datapath的基本结构**

数据通路是由**操作元件和存储元件**通过**总线**方式或**分散**方式连接而成的进行***数据存储、处理、传送***的路径

**操作元件**：（是组合逻辑电路）



**存储元件**：（时序逻辑电路）

setup时间：在时钟边沿到来**之前**，输入端保持不变的时间；

hold时间：在时钟边沿**之后**，输入端必须保持不变的时间；

clk-to-q锁存延迟：从时钟边沿到输出端稳定的时间；

#### 数据通路和时序控制

指令周期 : CPU执行一条指令需要的时间。

![image-20250421114837747](https://yamapicgo.oss-cn-nanjing.aliyuncs.com/picgoImage/image-20250421114837747.png)

指令周期：**Cycle Time = Latch Prop + Longest Delay Path + Setup + Clock Skew**

为了满足数据通路的要求，要能够盲注下面这个约束关系：
$$
holdTime< ClkToQ+shortestDelay
$$
即，**在下一个信号到来前，能够hold不变，防止输出异常**

---

### 计算机性能

衡量CPU性能的是**用户CPU时间**，执行用户的作业所需的时间，不考虑IO等

CPU的执行时间：

T= CPU的时钟周期数*时钟周期/程序= 指令条数/程序 *CPI *时钟周期

>   一个程序的时钟周期数x时钟周期

**CPI**： Cycle Per Instruction，每一条指令需要多少个时钟周期